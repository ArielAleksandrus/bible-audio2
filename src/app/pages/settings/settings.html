<div class="settings-container">
  <header class="settings-header">
    <mat-icon class="header-icon">settings</mat-icon>
    <h1>{{ 'settings.title' | translate }}</h1>
    <p>{{ 'settings.subtitle' | translate }}</p>
  </header>

  <!-- LANGUAGE CARD -->
  <section class="language-section">
    <mat-card class="session-card mat-elevation-z4">
      <mat-card-header>
        <mat-card-title>
          <mat-icon color="primary">language</mat-icon>
          Idioma / Language
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p class="language-info">{{ 'settings.language.current' | translate }}: <strong>{{ currentLanguageName }}</strong></p>
        <button mat-raised-button color="accent" (click)="resetLanguage()">
          <mat-icon>refresh</mat-icon>
          Resetar / Reset
        </button>
        <p class="language-note">
          <mat-icon class="note-icon">info</mat-icon>
          {{ 'settings.language.reset_note' | translate }}
        </p>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- STORAGE CARD -->
  <section class="storage-section" *ngIf="!loading; else loadingBlock">
    <mat-card class="session-card mat-elevation-z4">
      <mat-card-header>
        <mat-card-title>
          <mat-icon color="primary">storage</mat-icon>
          {{ 'settings.storage.title' | translate }}
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="storage-info">
          <div class="info-row">
            <span>{{ 'settings.storage.used_by_app' | translate }}</span>
            <strong>{{ totalUsedMB }} MB</strong>
          </div>
          <div class="info-row sub">
            <span>→ {{ 'settings.storage.audios' | translate }}</span>
            <strong>{{ usedByAudiosMB }} MB</strong>
          </div>
          <div class="info-row sub">
            <span>→ {{ 'settings.storage.bibles' | translate }}</span>
            <strong>{{ usedByBiblesMB }} MB</strong>
          </div>
          <div class="info-row sub">
            <span>→ {{ 'settings.storage.plans' | translate }}</span>
            <strong>{{ usedByPlansMB }} MB</strong>
          </div>
          <div class="info-row">
            <span>{{ 'settings.storage.available' | translate }}</span>
            <strong>{{ availableMB }} MB</strong>
          </div>
        </div>
        <div class="progress-container">
          <mat-progress-bar
            mode="determinate"
            [value]="percentageUsed"
            color="accent">
          </mat-progress-bar>
          <div class="progress-label">
            {{ percentageUsed }}% {{ 'settings.storage.used' | translate }} ({{ totalUsedMB }} {{ 'settings.storage.of' | translate }} {{ totalUsedMB + availableMB }} MB)
          </div>
        </div>
        <div class="actions">
          <button mat-raised-button color="warn" class="delete-button" (click)="clearAllAudios()">
            <mat-icon class="button-icon">delete_forever</mat-icon>
            <span class="button-text">{{ 'settings.storage.clear_audios' | translate }}</span>
          </button>
          <p class="warning-note">
            <mat-icon class="note-icon">info</mat-icon>
            {{ 'settings.storage.clear_warning' | translate:{size: usedByAudiosMB} }}
          </p>
        </div>
      </mat-card-content>
    </mat-card>
  </section>

  <ng-template #loadingBlock>
    <div class="loading-section">
      <mat-spinner diameter="50"></mat-spinner>
      <p>{{ 'settings.storage.calculating' | translate }}</p>
    </div>
  </ng-template>

  <!-- Futuras configurações -->
  <section class="future-sections">
    <p class="coming-soon">{{ 'settings.coming_soon' | translate }}</p>
  </section>
</div>
